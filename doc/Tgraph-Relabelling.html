<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Tgraph.Relabelling</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">PenroseKiteDart</span><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>(c) Chris Reade 2021</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>chrisreade@mac.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Tgraph.Relabelling</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Relabelling operations
</a></li><li><a href="#g:2">Union (and matching) operations
</a></li><li><a href="#g:3">Auxiliary functions
</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module includes relabelling functions for Tgraphs whose main purpose is
to implement a guided union of Tgraphs (simpleUnion and trySimpleUnion)</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">type</span> <a href="#t:Relabelling">Relabelling</a> = IntMap <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a></li><li class="src short"><a href="#v:relabelGraph">relabelGraph</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:relabelFace">relabelFace</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a></li><li class="src short"><a href="#v:relabelV">relabelV</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a> -&gt; <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a></li><li class="src short"><a href="#v:relabelAvoid">relabelAvoid</a> :: [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:prepareFixAvoid">prepareFixAvoid</a> :: [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:relabelAny">relabelAny</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:simpleUnion">simpleUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:trySimpleUnion">trySimpleUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:fullUnion">fullUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:tryFullUnion">tryFullUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:matchByEdges">matchByEdges</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:tryMatchByEdges">tryMatchByEdges</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:matchByCommonEdge">matchByCommonEdge</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:tryMatchByCommonEdge">tryMatchByCommonEdge</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:findRelabelling">findRelabelling</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a></li><li class="src short"><a href="#v:relabelTouching">relabelTouching</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a></li><li class="src short"><a href="#v:initRelabelling">initRelabelling</a> :: <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a></li><li class="src short"><a href="#v:differences">differences</a> :: [(<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>, <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>)] -&gt; [(<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>, <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>)]</li><li class="src short"><a href="#v:addRelabel">addRelabel</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; [<a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>] -&gt; [<a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>] -&gt; <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a></li><li class="src short"><a href="#v:matchFaceIn">matchFaceIn</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> (Maybe <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>)</li><li class="src short"><a href="#v:twoVMatch">twoVMatch</a> :: <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; Bool</li><li class="src short"><a href="#v:sameFaceType">sameFaceType</a> :: <a href="HalfTile.html#t:HalfTile" title="HalfTile">HalfTile</a> rep1 -&gt; <a href="HalfTile.html#t:HalfTile" title="HalfTile">HalfTile</a> rep2 -&gt; Bool</li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Relabelling operations
</h1></a><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Relabelling" class="def">Relabelling</a> = IntMap <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a> <a href="#t:Relabelling" class="selflink">#</a></p><div class="doc"><p>Relabelling is a special case of mappings from vertices to vertices.
 We use the identity map for vertices not found in the mapping domain
 (see relabelV).  Relabellings are expected to be 1-1 on their domain.       </p></div></div><div class="top"><p class="src"><a id="v:relabelGraph" class="def">relabelGraph</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:relabelGraph" class="selflink">#</a></p><div class="doc"><p>Uses a relabelling to change vertices in a Tgraph.
 relabelGraph rlab g will produce a valid Tgraph provided:
 g is a valid Tgraph, and
 the mapping rlab extended with the identity is 1-1 on vertices in g.
 (Vertices of g that are not in the domain of the mapping are left unchanged.)</p></div></div><div class="top"><p class="src"><a id="v:relabelFace" class="def">relabelFace</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> <a href="#v:relabelFace" class="selflink">#</a></p><div class="doc"><p>Uses a relabelling to relabel the three vertices of a face.
 Any vertex not in the domain of the mapping is left unchanged.
 The mapping should be 1-1 on the 3 vertices to avoid creating a self loop edge.</p></div></div><div class="top"><p class="src"><a id="v:relabelV" class="def">relabelV</a> :: <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a> -&gt; <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a> <a href="#v:relabelV" class="selflink">#</a></p><div class="doc"><p>relabelV rlab v. Uses relabelling rlab to find a replacement for v (leaves as v if none found).
 I.e relabelV turns a relabelling into a total function using identity for undefined cases. </p></div></div><div class="top"><p class="src"><a id="v:relabelAvoid" class="def">relabelAvoid</a> :: [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:relabelAvoid" class="selflink">#</a></p><div class="doc"><p>relabelAvoid vs g - produces a new Tgraph from g by relabelling.
 Any vertex in g that is in the list vs will be changed to a new vertex that is
 neither in g nor in the list vs. Vertices in g that are not in vs will remain the same.</p></div></div><div class="top"><p class="src"><a id="v:prepareFixAvoid" class="def">prepareFixAvoid</a> :: [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; [<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>] -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:prepareFixAvoid" class="selflink">#</a></p><div class="doc"><p>prepareFixAvoid fix avoid g - produces a new Tgraph from g by relabelling.
 Any vertex in g that is in the list avoid but not in the list fix will be changed to a new vertex that is
 neither in g nor in the list avoid \\ fix.
 All other vertices of g (including those in fix) will remain the same.
 Usage: This is used to prepare a graph by avoiding accidental label clashes with the avoid list
 (usually vertices of another graph).
  However we fix a list of vertices which we intend to control in a subsequent relabelling.
  (this is usually a pair of vertices from a directed edge that will get a specific subsequent relabelling).</p></div></div><div class="top"><p class="src"><a id="v:relabelAny" class="def">relabelAny</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:relabelAny" class="selflink">#</a></p><div class="doc"><p>Relabel all vertices in a Tgraph using new labels 1..n (where n is the number of vertices).</p></div></div><a href="#g:2" id="g:2"><h1>Union (and matching) operations
</h1></a><div class="top"><p class="src"><a id="v:simpleUnion" class="def">simpleUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:simpleUnion" class="selflink">#</a></p><div class="doc"><p>simpleUnion (g1,e1) (g2,e2) - where edge e1 is in g1 and e2 is in g2,
 checks if g2 can be relabelled to produce a common single region of overlap with g1
 (with e2 relabelled to e1). If so then the result is a (checked) Tgraph g
 where g has the union of the faces. Otherwise an error is raised.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.</p></div></div><div class="top"><p class="src"><a id="v:trySimpleUnion" class="def">trySimpleUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:trySimpleUnion" class="selflink">#</a></p><div class="doc"><p>trySimpleUnion (g1,e1) (g2,e2) - where edge e1 is in g1 and e2 is in g2,
 checks if g2 can be relabelled to produce a common single region of overlap with g1
 (with e2 relabelled to e1). If so then the result is Right g where g is the union of the faces.
 Otherwise the result is Left lines where lines explains the problem.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.</p></div></div><div class="top"><p class="src"><a id="v:fullUnion" class="def">fullUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:fullUnion" class="selflink">#</a></p><div class="doc"><p>fullUnion (g1,e1) (g2,e2) will try to create the full union of g1 and g2
    by matching the respective edges e1 and e2 and relabelling g2 to match g1.
    It will raise an error if there is a mismatch.
    This version uses geometry of tiles (vertex locations) to correct for multiple overlapping regions
    of tiles in g1 and g2             </p></div></div><div class="top"><p class="src"><a id="v:tryFullUnion" class="def">tryFullUnion</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:tryFullUnion" class="selflink">#</a></p><div class="doc"><p>tryFullUnion (g1,e1) (g2,e2) will try to create the full union of g1 and g2
    by matching the respective edges e1 and e2 and relabelling g2 to match g1.
    It returns Left lines  if there is a mismatch (where lines explains the problem).
    If succesfull it returns Right g where g is the resulting union (checked for Tgraph properties)
    This version uses geometry of tiles (vertex locations) to correct for multiple overlapping regions
    of tiles in g1 and relabelled g2             </p></div></div><div class="top"><p class="src"><a id="v:matchByEdges" class="def">matchByEdges</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:matchByEdges" class="selflink">#</a></p><div class="doc"><p>matchByEdges (g1,e1) (g2,e2)  produces a relabelled version of g2 that is
consistent with g1 on their overlap.
The overlapping region must contain the directed edge e1 in g1. The edge e2 in g2
will be identified with e1 by the relabelling of g2.
This produces an error if a mismatcch is found in the overlap.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.
(If the overlap contains more than one tile-connected region the result may not be
a correct relabelling of g2)    </p></div></div><div class="top"><p class="src"><a id="v:tryMatchByEdges" class="def">tryMatchByEdges</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:tryMatchByEdges" class="selflink">#</a></p><div class="doc"><p>tryMatchByEdges (g1,e1) (g2,e2) produces either Right g where g is a relabelled version of g2 that is
consistent with g1 on their overlap or Left lines if there is a mismatch (lines explaining the problem).
The overlapping region must contain the directed edge e1 in g1. The edge e2 in g2
will be identified with e1 by the relabelling of g2.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.
(If the overlap contains more than one tile-connected region the result may not be
a correct relabelling of g2)    </p></div></div><div class="top"><p class="src"><a id="v:matchByCommonEdge" class="def">matchByCommonEdge</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:matchByCommonEdge" class="selflink">#</a></p><div class="doc"><p>matchByCommonEdge g1 e g2  produces a relabelled version of g2 that is
consistent with g1 on their overlap.
The overlaping region must contain the common directed edge e without relabelling.
This produces an error if a mismatcch is found in the overlap.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.
(If the overlap contains more than one tile-connected region the result may not be
a correct relabelling of g2)    </p></div></div><div class="top"><p class="src"><a id="v:tryMatchByCommonEdge" class="def">tryMatchByCommonEdge</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:DEdge" title="Tgraph.Prelude">DEdge</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:tryMatchByCommonEdge" class="selflink">#</a></p><div class="doc"><p>tryMatchByCommonEdge g1 e g2  produces either Right g where g is a relabelled version of g2 that is
consistent with g1 on their overlap or Left lines if there is a mismatch (lines explaining the problem).
The overlaping region must contain the common directed edge e without relabelling.</p><p>CAVEAT: The overlap must be a SINGLE tile-connected region in g1.
(If the overlap contains more than one tile-connected region the result may not be
a correct relabelling of g2)    </p></div></div><a href="#g:3" id="g:3"><h1>Auxiliary functions
</h1></a><div class="top"><p class="src"><a id="v:findRelabelling" class="def">findRelabelling</a> :: (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>) -&gt; (<a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a>, <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>) -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> <a href="#v:findRelabelling" class="selflink">#</a></p><div class="doc"><p>findRelabelling is an auxiliary function for tryMatchByEdges and tryMatchByCommonEdge.
findRelabelling (g1,fc1) (g2,fc2) - fc1 and fc2 should be matching face types,
with fc1 in g1 and fc2 in g2.
g2 must have no vertices in common with g1 except for (possibly) vertices in fc2.
The result is either Right rel where
rel is a relabelling map to make g2 consistent with g1 in a region of overlap if this is possible, or
Left lines if there is a mismatch (lines explaining the problem).
In the successful case rel when applied to fc2 will be identical to fc1.</p><p>CAVEAT: The common overlap needs to be a SINGLE region of tile-connected faces in g1.
The common region must contain fc1 in g1 and fc2 in g2.
This may not produce correct results if there are other overlaps not tile-connected in g1
to the region containing fc1</p></div></div><div class="top"><p class="src"><a id="v:relabelTouching" class="def">relabelTouching</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> <a href="#v:relabelTouching" class="selflink">#</a></p><div class="doc"><p>relabelTouching is used by tryFullUnion.
relabelTouching g1 g2 assumes that there are vertex labels in g2 that match with vertex labels in g1
in a matching tile-connected overlap region. It then identifies other vertices in g2 that need to be
relabelled to match vertices in g1 based on a vertex location calculation.
It returns the result of applying this further relabelling to g2.</p></div></div><div class="top"><p class="src"><a id="v:initRelabelling" class="def">initRelabelling</a> :: <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> <a href="#v:initRelabelling" class="selflink">#</a></p><div class="doc"><p>initRelabelling f1 f2 - creates a relabelling so that
 if applied to face f2, the vertices will match with face f1 exactly.
 It does not check that the tile faces have the same form (LK,RK,LD,RD).</p></div></div><div class="top"><p class="src"><a id="v:differences" class="def">differences</a> :: [(<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>, <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>)] -&gt; [(<a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>, <a href="Tgraph-Prelude.html#t:Vertex" title="Tgraph.Prelude">Vertex</a>)] <a href="#v:differences" class="selflink">#</a></p><div class="doc"><p>selects only non-matching pairs from a list</p></div></div><div class="top"><p class="src"><a id="v:addRelabel" class="def">addRelabel</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; [<a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>] -&gt; [<a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>] -&gt; <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> <a href="Tgraph-Relabelling.html#t:Relabelling" title="Tgraph.Relabelling">Relabelling</a> <a href="#v:addRelabel" class="selflink">#</a></p><div class="doc"><p>addRelabel is used by findRelabelling to build a relabelling map which can fail, producing Left lines.
In the successful case (addRelabel g processing awaiting rlab) produces a Right rel
where rel is the required relabelling. The arguments are:
g - the Tgraph being matched against.
processing - a list of faces to be matched next where
each has an edge in common with at least one previously matched face (or it is the starting face).
awaiting - a list of faces that have not yet been tried for a match and are not
tile-connected to any faces already matched.
rlab - a vertex to vertex mapping used to store relabelling information during the process.</p><p>The idea is that from a single matched starting face we process faces that share an edge with a
previously matched face. We process faces that have a match in g (with 2 matching vertices).
If a face is tried but has no such match, it is ignored (it may share some boundary with g, but
for the overlap to be a single tile-connected region, only boundaries with matched tiles are possible
and therefore relabelling will already be done for the boundary).
If a processed face has an edge in common with a face in g it has to match exactly
apart from (possibly) the third vertex label,
otherwise the faces do not match and this
indicates a mismatch on the overlap and Left ... is returned.</p></div></div><div class="top"><p class="src"><a id="v:matchFaceIn" class="def">matchFaceIn</a> :: <a href="Tgraph-Prelude.html#t:Tgraph" title="Tgraph.Prelude">Tgraph</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:ReportFail" title="Tgraph.Prelude">ReportFail</a> (Maybe <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a>) <a href="#v:matchFaceIn" class="selflink">#</a></p><div class="doc"><p>matchFaceIn g f - looks for a face in g that corresponds to f (sharing a directed edge),
If the corresponding face does not match properly (with twoVMatch) this stops the
matching process returning Left ... to indicate a failed match.
Otherwise it returns either Right (Just f) where f is the matched face or
Right Nothing if there is no corresponding face.</p></div></div><div class="top"><p class="src"><a id="v:twoVMatch" class="def">twoVMatch</a> :: <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; <a href="Tgraph-Prelude.html#t:TileFace" title="Tgraph.Prelude">TileFace</a> -&gt; Bool <a href="#v:twoVMatch" class="selflink">#</a></p><div class="doc"><p>twoVMatch f1 f2 is True if the two tilefaces are the same except
 for a single vertex label possibly not matching.</p></div></div><div class="top"><p class="src"><a id="v:sameFaceType" class="def">sameFaceType</a> :: <a href="HalfTile.html#t:HalfTile" title="HalfTile">HalfTile</a> rep1 -&gt; <a href="HalfTile.html#t:HalfTile" title="HalfTile">HalfTile</a> rep2 -&gt; Bool <a href="#v:sameFaceType" class="selflink">#</a></p><div class="doc"><p>sameFaceType f1 f2 is True if f1 and f2  are of the same form
 (i.e. both LD or both RD or both LK or both RK)</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.25.1</p></div></body></html>